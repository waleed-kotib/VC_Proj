<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>XMPP URI Examples</title>

</head>

<body>
<center><h2><u>XMPP Protocol Initiation URI Syntax.</u></h2></center>


You can put an url in a web page to launch The Coccinella. Use a link:
<a href="xmpp:matben@athlon.se">xmpp:matben@athlon.se</a>
This works presently only on Windows, and you need to launch Coccinella
at least once with administrator privilegies to make it work.
Note that the jid you supplu in the uri is <EM>not</EM> your own login jid
but the target address for any action specified.
The login uses the active profile in the application, not the jid in the uri!

<p>
Most recent reference at the time of writing:
http://www.ietf.org/internet-drafts/draft-saintandre-xmpp-uri-06.txt.
If you use non US-ascii characters make sure the jid is encoded according
to the reference above.

<p>
You can also launch The Coccinella using the switch -uri:
set argv <CODE>-uri xmpp:marilu@l4l.be?...</CODE> from the console or terminal.

<p>
The specification does only specify the syntax used, and is considered
to be generic.
The syntax is:
<pre>
xmppuri   = "xmpp:" [ nodeid "@" ] host [ path-absolute ]
	    [ "?" xmppquery ] [ "#" fragment ]
xmppquery = querytype [ *pair ]
pair      = "&" key "=" value
</pre>

<p>
The supported querytype are: <CODE>message</CODE> and <CODE>groupchat</CODE>.
For any querytype you may specify the following key-value pairs:

<pre>
"ssl"           0|1
"priority"      integer
"invisible"     0|1
"ip"            network domain name or number
"sasl"          0|1
</pre>

<p>
For the <CODE>message</CODE> type the following key-value pairs are handled:
<pre>
"subject"       string
"body"          string
"thread"        unique string   this starts a chat with the jid in the uri
</pre>

<p>
For the <CODE>groupchat</CODE> type the following key-value pairs are handled
(note that the jid you specify here must be room/nickname):
<pre>
"password"      string        this is the password for entering the room if necessary
"xmlns"         "whiteboard"
</pre>

<h3>01 Perform a Coccinella login ##
<small>protocol:admin_user_node@our_domain</small></h3>
Perform a Coccinella login using your <EM>current selected profile</EM>. This is not very useful
since there is no query type. The jid you specify is supposed to be the target of your action,
or query, but since this is missing, it just performs a standard login.

<h3>02 Prepare to send an instant message ##
<small>protocol:contact_user_node@our_domain</small></h3>
Prepare to send a "Hello World" message to JTCorbet on Jabber host ag:
<a href="xmpp:JTCorbet@ag?message&subject=Hi&body=Hello%20World">
xmpp:JTCorbet@ag?message&subject=Hi&body=Hello%20World</a>.
<p>
Note that the same presumption of the <EM>current selected profile</EM>
is providing the necessary authentication for this activity on the server.
Valid in all cases below!

<h3>03 Prepare to start a chat session ##
<small>protocol:contact_user_node@our_domain</small></h3>
Prepare to start a chat session with JTCorbet on Jabber host ag using thread 100:
<a href="xmpp:JTCorbet@ag?message&subject=Hi&body=Hello%20World&thread=100">
xmpp:JTCorbet@ag?message&subject=Hi&body=Hello%20World&thread=100</a>.

<h3>04 Enter a chat room ##
<small>protocol:roomname@conference.our_domain/nickname</small></h3>
Enter the sss chat room using nickname Terry:
<a href="xmpp:sss@conference.ag/Terry?groupchat">
xmpp:sss@conference.ag/Terry?groupchat</a>.
<p>
Note that the same presumption of the <EM>current selected profile</EM>
is providing the necessary authentication for this activity on the server.
Now, moreover, the <i>server-side rule</i> that the owner of a room
has automatic access irrespective of password also is at play here because
the 'sss' room requires a password.

<h3>05 Start a whiteboard session ##
<small>protocol:roomname@conference.our_domain/nickname</small></h3>
Start a whiteboard session in the sss chat room with nickname Terry:
<a href="xmpp:sss@conference.ag/Terry?groupchat&xmlns=whiteboard">
xmpp:sss@conference.ag/Terry?groupchat&xmlns=whiteboard</a>.
<p>
Again, this works because Terry owns 'sss', or actually, the jid behind Terry owns the room.
Howevr, most rooms are not password protected, hence no password key is necessary.

</body>
</html>


